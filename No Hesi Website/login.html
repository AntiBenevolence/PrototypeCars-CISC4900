<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tag for character set -->
    <meta charset="UTF-8">
    
    <!-- Page title -->
    <title>Login | No Hesi Interactives</title>
    
    <!-- Links to external CSS stylesheets for reset and custom styles -->
    <link href="reset.css" rel="stylesheet" type="text/css" />
    <link href="reset-webview.css" rel="stylesheet" type="text/css" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    
    <!-- Link to external font from Google Fonts -->
    <link href="https://fonts.google.com/specimen/Young+Serif" rel="stylesheet">
    
    <!-- Favicon for the website -->
    <link rel="icon" href="img/image2.png">
    
    <!-- Supabase JavaScript library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.28.5"></script>
</head>
<body class="my-custom-styles">
    <!-- Navigation bar -->
    <div class="navbar">
        <ul>
            <li><a href="index.html">No Hesi Interactives</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="news.html">Gallery/News</a></li>
            <li><a href="download.html">Download</a></li>
            <li><a href="login.html">Login/SignUp</a></li>
        </ul>
    </div>

    <!-- Main content section -->
    <main class="main-content">
        <!-- Header with main title and subtitle -->
        <h1 class="header-1-font-size text-center">No Hesi Interactives</h1>
        <h3 class="header-3-font-size text-center">Driving Simulation</h3>
        
        <!-- Login section with a form -->
        <div class="text-center white-text">
            <h2 class="header-2-font-size">Login to Your Account</h2>
            <p class="paragraph-font-size">Welcome back! Please enter your details to login. If you're new here, you can <a href="signup.html">create an account</a> to join No Hesi Interactives.</p>
            <div>
                <h3 class="header-3-font-size">Login</h3>
                <form id="login-form">
                    <!-- Email input field -->
                    <input type="email" id="email" placeholder="Email" required>
                    <!-- Password input field -->
                    <input type="password" id="password" placeholder="Password" required>
                    <!-- Submit button -->
                    <button type="submit" id="login-form">Login</button>
                </form>
            </div>
        </div>

        <!-- JavaScript for handling login -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                console.log('Document loaded');
                const supabaseUrl = 'https://tpwvqeodqsswzaixarnm.supabase.co';
                const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRwd3ZxZW9kcXNzd3phaXhhcm5tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTUwMTY3NzksImV4cCI6MjAzMDU5Mjc3OX0.jbf_zWIAovuujlaAshVqLTfyq-Al-PX_wOqZRgD7qPs';

                // Initialize Supabase client
                const supabase = window.supabase.createClient(supabaseUrl, supabaseAnonKey);
                console.log('Supabase:', supabase);
                console.log('Auth:', supabase.auth);

                // Handle form submission for login
                document.getElementById('login-form').addEventListener('submit', async function(event) {
                    event.preventDefault(); // Prevent default form submission
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    console.log('Email:', email);
                    console.log('Password:', password);

                    try {
                        // Attempt to sign in using Supabase auth
                        const { user, session, error } = await supabase.auth.signIn({ email: email, password: password });
                        if (error) {
                            console.error('Login error:', error);
                            alert('Login error: ' + error.message); // Show error message
                        } else {
                            console.log('Login successful:', session);
                            window.location.href = '/nohesihub.html'; // Redirect to the NoHesiHub page after successful login
                        }
                    } catch (error) {
                        console.error('Error during login:', error);
                    }
                });
            });
        </script>
    </main>
    
    <!-- Footer section with links -->
    <div class="footer">
        <a href="index.html" rel="noopener noreferrer">Home</a> |
        <a href="legal.html" rel="noopener noreferrer">Legal</a> |
        <a href="contactus.html" rel="noopener noreferrer">Contact Us</a> |
        <a href="termsofuse.html" rel="noopener noreferrer">Terms of Use</a> |
        <a href="privacypolicy.html" rel="noopener noreferrer">Privacy Policy</a> |
        <a href="codeofconduct.html" rel="noopener noreferrer">Code of Conduct</a>
    </div>
    
    <!-- Link to external JavaScript file -->
    <script src="index.js"></script>
</body>
</html>
